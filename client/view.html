<head>
  <title>paintGame</title>
</head>

<body>
  {{> page }}
</body>

<template name="page">
  <h1>Paint Game!</h1>
  {{# if notInGame }}
    {{> lobby }}
  {{ else }}
    {{> game }}
  {{/ if }}
</template>

<template name="lobby">
  <div align="right">
    {{ loginButtons align="right" }}
  </div>
  <div style="margin:10px 0px">
    <div>
      <label id="playerNameLabel" for="playerName">Your Name:</label>
    </div>
    <input id="playerName" type="text" />
  </div>
  <div style="margin:10px 0px">
    {{# each games }}
      {{> gameInfo }}
    {{/ each }}
  </div>
  <div style="margin:10px 0px">
    <div>
      <label for="gameName">Game Name:</label>
    </div>
    <input id="gameName" type="text" />
    <button id="newGame">New Game</button>
  </div>
</template>

<template name="gameInfo">
  <div>
    {{# if currentUser }}
      <button id="join">Join</button>
    {{/ if }}
    {{ name }}
  </div>
</template>

<template name="game">
  {{> gameStatus }}
  {{> drawing }}
  {{> guessing }}
  {{> players }}
</template>

<template name="gameStatus">
  <div>
    {{ _name }}
  </div>
  <div>
    {{ phase }}
    {{ clock }}
  </div>
</template>

<template name="player">
  <div>
    {{ name }} : {{ score }}
  </div>
</template>

<template name="drawing">
  {{# if show }}
    <div style="margin:10px 0px">
      <div>
        You are drawing:
      </div>
      {{> subject drawerData }}
      {{# constant }}
        {{> paint }}
      {{/ constant }}
    </div>
  {{/ if }}
</template>

<template name="paint">
  <div id="paint" style="position:relative; width:800px; height:600px; background:#FFFFFF; border:solid black 1px;" />
</template>

<template name="guessing">
  {{# if show }}
    <div style="margin:10px 0px">
      {{# each pictures }}
        <div style="float:left; margin:0px 10px">
          {{> picture }}
        </div>
      {{/ each }}
      <div style="clear:both" />
    </div>
  {{/ if }}
</template>

<template name="subject">
  <div>
    {{ text }}
  </div>
</template>

<template name="picture">
  {{> player drawer }}
  <div>
    <img src="{{ image }}" style="width:400px; height:300px; border:solid black 1px;" />
  </div>
  {{# if answered }}
    <div style="color:red">
      {{> subject drawerId }}
    </div>
  {{ else }}
    {{# if mine }}
      {{> subject drawerId }}
    {{ else }}
      <div>
        <input id="answerInput" type="text" />
        <button>Guess!</button>
      </div>
    {{/ if }}
  {{/ if }}
</template>

<template name="players">
  <div style="margin:10px 0px">
    <div>
      Players:
    </div>
    {{# each players }}
      {{> player }}
    {{/ each }}
  </div>
</template>